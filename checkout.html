<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout</title>
    <link rel="stylesheet" href="./css/global.css">
</head>
<body>
<div class="iphone-container">

    <a href="./food-item.html">
        <img class="arrow-left mb-5" src="./img/arrow-left.png" alt="left arrow">
    </a>

    <h2 class="mb-4">Select Payment Method</h2>

    <div class="payment-method mb-2" data-method="card">
        <div class="payment-left">
            <img class="payment-img" src="./img/debit.png" alt="debit card image">
            <p>Debit/Credit Card</p>
        </div>
        <img class="icon" src="./img/checkbox.png" alt="checkbox icon">
    </div>

    <div class="payment-method mb-2" data-method="card">
        <div class="payment-left">
            <img class="payment-img" src="./img/apple.png" alt="apple pay image">
            <p>Apple Pay</p>
        </div>
        <img class="icon" src="./img/checkbox.png" alt="checkbox icon">
    </div>

    <div class="payment-method mb-2" data-method="card">
        <div class="payment-left">
            <img class="payment-img" src="./img/paypal.png" alt="paypal image">
            <p>Paypal</p>
        </div>
        <img class="icon" src="./img/checkbox.png" alt="checkbox icon">
    </div>

    <div class="payment-method mb-5" data-method="card">
        <div class="payment-left">
            <img class="payment-img" src="./img/venmo.png" alt="venmo image">
            <p>Venmo</p>
        </div>
        <img class="icon" src="./img/checkbox.png" alt="checkbox icon">
    </div>

    <hr class="mb-5">

    <h2 class="mb-4">Available Rewards</h2>

    <div class="rewards-checkout mb-2">
        <div class="left-rewards">
            <img class="gift-icon" src="./img/gift.png" alt="gift icon">
            <div class="reward-text">
                <h4>Free Drink</h4>
                <p>150 pts</p>
            </div>
        </div>
        <div class="apply-reward-text-box">
            <p>Apply Reward</p>
        </div>
    </div>

        <div class="rewards-checkout mb-5">
        <div class="left-rewards">
            <img class="gift-icon" src="./img/gift.png" alt="gift icon">
            <div class="reward-text">
                <h4>$2.00 Off</h4>
                <p>270 pts</p>
            </div>
        </div>
        <div class="apply-reward-text-box">
            <p>Apply Reward</p>
        </div>
    </div>

    <hr class="mb-5">

    <h2 class="mb-4">Add Tip?</h2>

    <div class="add-tip mb-5">
        <div class="tip">
            <h4>10%</h4>
            <p>$0.70</p>
        </div>

        <div class="tip">
            <h4>15%</h4>
            <p>$1.05</p>
        </div>

        <div class="tip">
            <h4>20%</h4>
            <p>$1.40</p>
        </div>

        <div class="tip">
            <h4>25%</h4>
            <p>$2.10</p>
        </div>
    </div>

    <hr class="mb-5">

    <div class="cost-breakdown mb-3">
        <h4>1x Egg & Cheese, +bacon</h4>
        <h4>$4.00</h4>
    </div>

    <div class="cost-breakdown mb-5">
        <h4>1x Diet Coke</h4>
        <h4>$2.00</h4>
    </div>

    <div class="cost-breakdown mb-3">
        <h4>Tip (0%)</h4>
        <h4>$0.00</h4>
    </div>

    <div class="cost-breakdown mb-5">
        <h4>Tax</h4>
        <h4>$1.34</h4>
    </div>

    <div class="cost-breakdown">
        <h2>Total</h2>
        <h2>$8.34</h2>
    </div>

    <div class="btn mt-5" id="place-order-btn">
        <h4>Place Order</h4>
    </div>    

    </div>

    <div id="apple-pay-overlay" 
        style="display:none; position:fixed; z-index:9999; justify-content:center; align-items:center; cursor:pointer; border-radius:24px; background:rgba(0,0,0,0.7);">
        <img src="./img/apple-pay-overlay.png" alt="Apple Pay" style="width:100%; height:100%; object-fit:cover; border-radius:24px; pointer-events:none;">
    </div>

    <script>
        document.getElementById('place-order-btn').addEventListener('click', function() {
        const overlay = document.getElementById('apple-pay-overlay');
        const container = document.querySelector('.iphone-container');
        const rect = container.getBoundingClientRect();

        overlay.style.top = rect.top + 'px';
        overlay.style.left = rect.left + 'px';
        overlay.style.width = rect.width + 'px';
        overlay.style.height = rect.height + 'px';
        overlay.style.display = 'flex';
        });

        document.getElementById('apple-pay-overlay').addEventListener('click', function() {
        window.location.href = './order-confirmation.html';
        });
    </script>
</body>
</html>

<script>
    const paymentMethods = document.querySelectorAll('.payment-method');

    paymentMethods.forEach(method => {
    method.addEventListener('click', () => {

        paymentMethods.forEach(item => {
        const icon = item.querySelector('.icon');
        icon.src = './img/checkbox.png';
        });

        const selectedIcon = method.querySelector('.icon');
        selectedIcon.src = './img/checkbox-filled.png';
    });
    });

    const rewards = document.querySelectorAll('.rewards-checkout');

    rewards.forEach(reward => {
    reward.addEventListener('click', () => {

        rewards.forEach(item => {
        item.style.backgroundColor = '';
        item.style.opacity = '0.5';

        const box = item.querySelector('.apply-reward-text-box');
        box.style.backgroundColor = '';
        
        const text = box.querySelector('p');
        text.textContent = 'Apply Reward';
        });

        reward.style.backgroundColor = '#FFF1EF';
        reward.style.opacity = '1';

        const selectedBox = reward.querySelector('.apply-reward-text-box');
        selectedBox.style.backgroundColor = '#FCC5BE';

        const selectedText = selectedBox.querySelector('p');
        selectedText.textContent = 'Applied!';
    });
    });

    const tips = document.querySelectorAll('.tip');

    tips.forEach(tip => {
    tip.addEventListener('click', () => {

        tips.forEach(item => {
        item.style.backgroundColor = '';
        });

        tip.style.backgroundColor = '#FFF1EF';
    });
    });
</script>